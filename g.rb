# typed: false
# frozen_string_literal: true

# This file was generated by GoReleaser. DO NOT EDIT.
class G < Formula
  desc "Golang Version Manager"
  homepage "https://github.com/voidint/g"
  license "MIT"
  head "https://github.com/JS-mark/homebrew-g.git", branch: "main"
  version "1.8.0"

  on_macos do
    if Hardware::CPU.arm?
      url "https://github.com/voidint/g/releases/download/v1.8.0/g1.8.0.darwin-arm64.tar.gz"
      sha256 "0788190fbd2240a649d8a1afe7da11460c649dd7031594f226cb2af1362c9a6d"

      def install
        bin.install "g" => "gmv"
      end
    end
    if Hardware::CPU.intel?
      url "https://github.com/voidint/g/releases/download/v1.8.0/g1.8.0.darwin-amd64.tar.gz"
      sha256 "cd5ef23d5cfeca9b4f1dc7cf428a1f3619dd42ced95b2c368c4aba74ab0aa2b2"

      def install
        bin.install "g" => "gmv"
      end
    end
  end

  on_linux do
    if Hardware::CPU.intel?
      url "https://github.com/voidint/g/releases/download/v1.8.0/g1.8.0.linux-amd64.tar.gz"
      sha256 "33065ecbb7641e06d9a28a3478548e42e2e4b02ad8f02b7c2a1dd3a11586a52b"

      def install
        bin.install "g" => "gmv"
      end
    end
    if Hardware::CPU.arm? && !Hardware::CPU.is_64_bit?
      url "https://github.com/voidint/g/releases/download/v1.8.0/g1.8.0.linux-arm.tar.gz"
      sha256 "38c39520f2ddbf6a26e816f09001a146bf670af7ce0b4a8b5c8d4526dcd97848"

      def install
        bin.install "g" => "gmv"
      end
    end
    if Hardware::CPU.arm? && Hardware::CPU.is_64_bit?
      url "https://github.com/voidint/g/releases/download/v1.8.0/g1.8.0.linux-arm64.tar.gz"
      sha256 "e9da22cba66e0984a3d4c5a6504e659be8e1f199e3c4c334f5128e57a8a306b0"

      def install
        bin.install "g" => "gmv"
      end
    end
  end

  def caveats
    <<~EOS
      # 建议安装前清空`GOROOT`、`GOBIN`等环境变量
      $ curl -sSL https://raw.githubusercontent.com/voidint/g/master/install.sh | bash
      $ echo "unalias g" >> ~/.bashrc # 可选。若其他程序（如'git'）使用了'g'作为别名。
      $ source ~/.bashrc # 或者 source ~/.zshrc

      $ ~/.bashrc
      # export GOROOT="${HOME}/.g/go"
      # export PATH="${HOME}/.g/go/bin:$PATH"
      # export G_MIRROR=https://golang.google.cn/dl/
    EOS
  end

  test do
    system bin/"gmv", "ls-remote"
  end
end
